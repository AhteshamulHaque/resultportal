function pad_roll(e,s){for(var o=e+"";o.length<s;)o="0"+o;return o}function download_recursively(e,s,o,l,r,t){-1==s.indexOf(o+pad_roll(e,t))?$.ajax({url:"/student/"+(o+pad_roll(e,t))+"?save=true&semester="+l,success:function(d){$("div[downloaded-info='"+o+l+"']").append('<div class = "item" roll="'+d.roll+'"><span class = "ui text small">'+d.name+" ("+d.roll+")</span></div>"),console.log("Got result for "+o+pad_roll(e,t)+", Semester: "+l),r.percent<98&&(r.percent+=1),$("div[download-progress='"+o+l+"']").progress({percent:r.percent}),$("span[download-count='"+o+l+"']").text(r.percent),download_recursively(e+1,s,o,l,r,t)},error:function(d){console.log("Missed for "+o+pad_roll(e,t)+" "+l),"503"==d.status?d.abort():r.total_miss<5?(null==r.previous_miss||r.previous_miss+1==e?r.total_miss+=1:r.total_miss=1,r.previous_miss=e,download_recursively(e+1,s,o,l,r,t)):$.ajax({url:"/student/"+(o+pad_roll(e,t))+"?complete=true&semester="+l,success:function(){console.log("Completed"),$("div[download-progress='"+o+l+"']").progress({percent:100})}})}}):(console.log("Student "+o+pad_roll(e,3)+" is already present"),download_recursively(e+1,s,o,l,r,t))}$("#all").click(function(){$(".specific").click(),$(this).addClass("disabled")}),$(".specific").click(function(){for(var e=$(this).attr("branch-to-download"),s=$(this).attr("semester"),o=[],l={previous_miss:void 0,total_miss:0,percent:Number($("div[download-progress='"+e+s+"']").attr("data-percent"))},r=$("div[downloaded-info='"+e+s+"']").children(),t=0;t<r.length;++t)o.push(r[t].getAttribute("roll"));$(this).addClass("disabled").removeClass(".specific");var d=3;"PG"!=e.slice(4,6)&&"TYC"!=e.slice(0,3)||(d=2),download_recursively(1,o,e,s,l,d)});