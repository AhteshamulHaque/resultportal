$(document).ready(function(){$("#refresh_result").click(function(){var e=[];$(".result_status").each(function(s){"FAIL"==$(this).text()&&e.push({roll:$(this).attr("roll"),semester:$(this).attr("semester")})}),$("#load").modal({blurring:!0,closable:!1,onHide:()=>{$("#sem_list").empty(),$("#update-sem-message").empty(),$("#load-approve").addClass("disabled")}}).modal("show"),$("#sems_list").empty(),$("#update-sem-message").empty(),$("#load-approve").addClass("disabled");for(var s=e.length-1;s>=0;--s)$("#sems_list").append('<li class = "item"><i id = "updating-sem-loader-'+e[s].semester+'" class="notched black circle loading icon"></i> Semester '+e[s].semester+"</li>");!function e(s,a){if(0==s.length)return a?($("#sems_list").append('<li class = "item"><i id = "updating-ranklist" class="notched black circle loading icon"></i> Updating rank list</li>'),$.ajax({url:"https://nilekrator.pythonanywhere.com/updaterank",success:function(e){$("#updating-ranklist").removeClass("notched black circle loading").addClass("green check"),$("#update-sem-message").html("<span class = 'ui green text'>Congrats! You have cleared all your semesters. Refresh the page to see the effects.</span>")},error:function(){$("#sems_list").empty(),$("#sems_list").html("<li class = 'item'><span class = 'ui red text'><i class = 'exclamation icon'></i> There was a problem. Try again Later.</span></li>"),$("#load-approve").removeClass("disabled")},timeout:15e3,dataType:"JSON"})):$("#update-sem-message").html("<span class = 'ui red text'>You have not passed all the semesters. Cannot update rank</span>"),void $("#load-approve").removeClass("disabled");var t=s.pop();$.ajax({url:"https://nilekrator.pythonanywhere.com/student/"+t.roll+"?save=true&semester="+t.semester,success:function(l){Number(l.cgpa)>0?$("#updating-sem-loader-"+t.semester).removeClass("notched black circle loading").addClass("check green"):(a=!1,$("#updating-sem-loader-"+t.semester).removeClass("notched black circle loading").addClass("red close")),e(s,a)},error:function(){$("#sems_list").empty(),$("#sems_list").html("<li class = 'item'><span class = 'ui red text'><i class = 'exclamation icon'></i> There was a problem. Try again Later.</span></li>"),$("#load-approve").removeClass("disabled")},timeout:15e3,dataType:"JSON"})}(e,!0)})});